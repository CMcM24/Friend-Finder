<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FriendFinder Survey</title>
    <script src="https://code.jquery.com/jquery.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
    <style>
        .textcolors {
            color: rgb(253, 187, 4);
        }

        ;
    </style>
</head>

<body style="background-color: rgb(255, 215, 104)">

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-12 justify-content-center textcolors" style="background-color: rgb(26, 9, 54)">
                <h1>FriendFinder Survey</h1>
                <br>

                <h4>What is your name? (Required)</h4>
                <input type="form" id="nameInput" class="form-control" required>
                <h4>Link to Photo Image (Required)</h4>
                <input type="form" id="photoInput" class="form-control" required>
                <hr>

                <h5>Answer the below questions. We will use your answers to pair you with someone who's answers most
                    align with yours, so answer honestly! Choose a number to respond to each question. "1" meaning you
                    strongly disagree, and "5" meaning you strongly agree. The numbers inbetween provide you some nuance, with "3" meaning you are 50/50.</h5>
                <h5></h5>
                <hr>

                <div class="form-group">
                    <label for="q1">Question 1: You can tolerate the cold.</label>
                    <select class="form-control" id="q1" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q2">Question 2: You love being surrounded by family.</label>
                    <select class="form-control" id="q2" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q3">Question 3: You make friends easily.</label>
                    <select class="form-control" id="q3" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q4">Question 4: You never back down from a challenge.</label>
                    <select class="form-control" id="q4" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q5">Question 5: You enjoy working with tools.</label>
                    <select class="form-control" id="q5" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q6">Question 6: You love animals.</label>
                    <select class="form-control" id="q6" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q7">Question 7: People like being around you.</label>
                    <select class="form-control" id="q7" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q8">Question 8: You'd like to live somehwere exotic.</label>
                    <select class="form-control" id="q8" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q9">Question 9: Residents of Midgard worship you.</label>
                    <select class="form-control" id="q9" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="q10">Question 10: One day you will fight the World Serpent, and
                        the ensuing fight will bring about Ragnorak.</label>
                    <select class="form-control" id="q10" style="width: 140px">
                        <option value></option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <a class="btn btn-warning btn-lg" role="button" id="submit" style="color: black">Submit</a>
                <br>
                <br>
                <br>
            </div>
        </div>

</body>

<script type="text/javascript">

$("#submit").on("click", function(event){

    var newScores = [];

    var newName =$("#nameInput").val().trim();
    var newPhoto =$("#photoInput").val().trim();
    var one =$("#q1").val();
    var two =$("#q2").val();
    var three =$("#q3").val();
    var four =$("#q4").val();
    var five =$("#q5").val();
    var six =$("#q6").val();
    var seven =$("#q7").val();
    var eight =$("#q8").val();
    var nine =$("#q9").val();
    var ten =$("#q10").val();

    newScores.push(one, two, three, four, five, six, seven, eight, nine, ten);

    var addFriend = {
        name: newName,
        photo: newPhoto,
        scores: newScores
    };

    console.log(addFriend);

    $.post("/api/friends", addFriend, function(data){
        if(data){
            console.log("You have been added to our Friends List!");
        }
        else{
            console.log("error");
        };
    });

    $.get("/api/friends", function(data){
        var friendData = data;
        var diffArray = [];

        for(var i = 0; i < friendData.length; i++){
            var friendScores = friendData[i].scores;

                var a1 = newScores[0];
                var b1 = friendScores[0];
                var a2 = newScores[1];
                var b2 = friendScores[1];
                var a3 = newScores[2];
                var b3 = friendScores[2];
                var a4 = newScores[3];
                var b4 = friendScores[3];
                var a5 = newScores[4];
                var b5 = friendScores[4];
                var a6 = newScores[5];
                var b6 = friendScores[5];
                var a7 = newScores[6];
                var b7 = friendScores[6];
                var a8 = newScores[7];
                var b8 = friendScores[7];
                var a9 = newScores[8];
                var b9 = friendScores[8];
                var a10 = newScores[9];
                var b10 = friendScores[9];

                var diff1 = function (a1, b1) { return Math.abs(a1 - b1); };
                var diff2 = function (a2, b2) { return Math.abs(a2 - b2); };
                var diff3 = function (a3, b3) { return Math.abs(a3 - b3); };
                var diff4 = function (a4, b4) { return Math.abs(a4 - b4); };
                var diff5 = function (a5, b5) { return Math.abs(a5 - b5); };
                var diff6 = function (a6, b6) { return Math.abs(a6 - b6); };
                var diff7 = function (a7, b7) { return Math.abs(a7 - b7); };
                var diff8 = function (a8, b8) { return Math.abs(a8 - b8); };
                var diff9 = function (a9, b9) { return Math.abs(a9 - b9); };
                var diff10 = function (a10, b10) { return Math.abs(a10 - b10); };

                var totalDifference = diff1 + diff2 + diff3 + diff4 + diff5 + diff6 + diff7 + diff8 + diff9 + diff10;

                var compObj = {
                    compName: friendData[i].name,
                    difference: totalDifference
                };

                diffArray.push(compObj);
        }
    })
})

</script>

</html>